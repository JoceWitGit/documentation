<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Procedures for working with EC2 instances">
<meta name="keywords" content="AWS,  aws, instances, procedures">
<title>EC2 Instances | Research Computing Resources</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-purple.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://idratherbewriting.comfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Research Computing Resources</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="calendar.html">Calendar</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Jekyll Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/tomjohnson1492/documentation-theme-jekyll" target="_blank">Github Repo</a></li>
                        
                        
                        
                        <li><a href="https://talk.jekyllrb.com" target="_blank">Jekyll Talk</a></li>
                        
                        
                        
                        <li><a href="http://jekyllrb.com/docs/home/" target="_blank">Jekyll documentation</a></li>
                        
                        
                        
                        <li><a href="http://stackoverflow.com/questions/tagged/jekyll" target="_blank">Jekyll on Stack Overflow</a></li>
                        
                        
                        
                        <li><a href="http://idratherbewriting.com/category-jekyll/" target="_blank">Jekyll on my blog</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li><a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:amandach@uw.edu?subject=Cloud maven f eedback&body=I have some feedback about the EC2 Instances page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="EC2 Instances">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Documentation </li>
    
    
    
        
    
    <li>
        <a href="#">Proposals</a>
        <ul>
            
            
            
            <li><a href="proposals.html">Proposal Prep</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Cloud Core</a>
        <ul>
            
            
            
            <li><a href="cloud_intro.html">What is the cloud</a></li>
            
            
            
            
            
            
            <li><a href="cloud_datasecurity.html">Data Security</a></li>
            
            
            
            
            
            
            <li><a href="cloud_cost.html">Cost Management</a></li>
            
            
            
            
            
            
            <li><a href="cloud_computepower.html">Compute Power</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">AWS Procedurals</a>
        <ul>
            
            
            
            <li><a href="aws_firstwalkthrough.html">First Cloud Walkthrough</a></li>
            
            
            
            
            
            
            <li><a href="aws_secondwalkthrough.html">Second Cloud Walkthrough</a></li>
            
            
            
            
            
            
            <li><a href="aws_thirdwalkthrough.html">Third Cloud Walkthrough</a></li>
            
            
            
            
            
            
            <li><a href="aws_fourthwalkthrough.html">Fourth Cloud Walkthrough</a></li>
            
            
            
            
            
            
            <li><a href="aws_console.html">Using the AWS Console</a></li>
            
            
            
            
            
            
            <li><a href="aws_accountmanage.html">AWS Account Management</a></li>
            
            
            
            
            
            
            <li class="active"><a href="aws_ec2instances.html">EC2 Instances</a></li>
            
            
            
            
            
            
            <li><a href="aws_ec2resources.html">EC2 Resources</a></li>
            
            
            
            
            
            
            <li><a href="aws_cfncluster.html">CFN Cluster, SGE & Boto</a></li>
            
            
            
            
            
            
            <li><a href="aws_jupyter.html">Jupyter Notebooks on AWS</a></li>
            
            
            
            
            
            
            <li><a href="aws_hipaa.html">HIPAA Compliance on AWS</a></li>
            
            
            
            
            
            
            <li><a href="aws_iot.html">IoT on AWS</a></li>
            
            
            
            
            
            
            <li><a href="aws_spark.html">Spark on AWS</a></li>
            
            
            
            
            
            
            <li><a href="aws_spotmarket.html">Spot Market</a></li>
            
            
            
            
            
            
            <li><a href="aws_rds.html">RDS, DynamoDB & Other DBs</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Azure Procedurals</a>
        <ul>
            
            
            
            <li><a href="azure_firstwalkthrough.html">First Day Cloud Walkthrough</a></li>
            
            
            
            
            
            
            <li><a href="azure_portal.html">Using the Azure Portal</a></li>
            
            
            
            
            
            
            <li><a href="azure_vs.html">Visual Studio and Python</a></li>
            
            
            
            
            
            
            <li><a href="azure_webframeworks.html">Web Frameworks on Azure</a></li>
            
            
            
            
            
            
            <li><a href="azure_api.html">Data API building</a></li>
            
            
            
            
            
            
            <li><a href="azure_mls.html">Azure Machine Learning Studio</a></li>
            
            
            
            
            
            
            <li><a href="azure_spark.html">Spark on Azure</a></li>
            
            
            
            
            
            
            <li><a href="azure_jupyter.html">Jupyter Notebooks on Azure</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Google Procedurals</a>
        <ul>
            
            
            
            <li><a href="google_earthengine.html">Google Earth Engine</a></li>
            
            
            
            
            
            
            <li><a href="google_appengine.html">Google App Engine</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Research Computing Case Studies</a>
        <ul>
            
            
            
            <li><a href="rc_geoserver.html">Geoserver</a></li>
            
            
            
            
            
            
            <li><a href="rc_rosetta.html">Rosetta</a></li>
            
            
            
            
            
            
            <li><a href="rc_orgchem.html">Organic Chemistry</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Resources</a>
        <ul>
            
            
            
            <li><a href="resources_docker.html">Docker Containers</a></li>
            
            
            
            
            
            
            <li><a href="http:escience.washington.edu">Data Science Studio</a></li>
            
            
            
            
            
            
            <li><a href="resources_viz.html">Data Visualization</a></li>
            
            
            
            
            
            
            <li><a href="resources_github.html">Github</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">EC2 Instances</h1>
</div>



<div class="post-content">

   
    <div class="summary">Procedures for working with EC2 instances</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

    

    

    <a target="_blank" href="https://github.com/tomjohnson1492/documentation-theme-jekyll/blob/gh-pages/pages//_pages/mydoc/aws_ec2instances.html.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    

    

  <h2 id="introduction">Introduction</h2>
<p>An EC2 (Elastic Cloud Compute) instance is essentially a virtual server; it is no different from having a Linux (or Windows) box sit under your desk except that if you need to scale your applications i.e. increase computing capacity or expand storage, you don’t have to run out to Silicon Mechanics or Best Buy to purchase new machinery - you can essentially get a new CPU or multiple CPUs and hard drives with the click of a button. Please read our Cloud Core pages on how <a href="/cloud_computepower.html">cloud compute service</a> may be suitable for your project, how to <a href="/cloud_cost.html">cost</a> and where to <a href="/cloud_intro.html">begin</a>!</p>

<p>The purpose of this page is to describe the terminology and relationships of Amazon Web Services (AWS) EC2 instances, AMIs, Elastic Block Storage (EBS) and Snapshots of EBS volumes: Broadly EC2 Resources. EBS or Elastic Block Storage and EFS or Elastic File System are two ways of managing operational memory in AWS EC2 instances and clusters.  In passing we also define / describe Elastic IPs and Key Pairs and sharing access to S3. This document does not currently cover EFS, Elastic File System.</p>

<h2 id="setting-up-an-ec2-instance">Setting up an EC2 Instance</h2>

<p>Links
https://aws.amazon.com/ebs/
https://aws.amazon.com/efs/
https://aws.amazon.com/training/course-descriptions/bigdata-fundamentals/</p>

<p>Aha! If you are new to cloud computing read this.</p>

<p>As noted the terminology here applies to AWS technology.</p>

<p>The ‘compute’ part of the cloud begins with Virtual Machines that are called Elastic Cloud Compute = ECC = EC2 <strong><em>instances</em></strong>. To get started with EC2 instances you would log on to the AWS console, click on the EC2 icon and follow the buttons to create a new instance; which takes a few minutes. And then you can log in to that machine and use it like any other computer. It has an operating system that you choose, it has some amount of computing power that you choose, it has some amount of RAM that you choose… and it has very little disk space.</p>

<p>This is the big Aha: You also want to attach some disk space in the process as well. The generic term for disk space is a disk volume. You can attach these volumes (more than one is fine) in the spin-up process or you can attach them later. This is Elastic Block Storage (EBS). A single EBS volume can be up to 16 Terabytes.</p>

<p>Let’s assume EBS is where you’ll keep your data; and so to safely make a back-up copy of that EBS volume you can periodically take snapshots of it. The snapshots bundle up all the stuff in the volume and put that (like a big zip file) in S3 storage. That storage is completely separate from the EC2 instance and its attached EBS volumes. You can also bundle up an image of the entire EC2 instance into storage. This is a snapshot combined with some additional instructions on setting up the instance; and together these comprise an AMI for Amazon Machine Image. So there are two levels of granularity in backing up your work: Snapshots and AMIs.</p>

<p>Now how much does this cost? The EBS costs ten cents per GB-month. Storage costs three cents per GB-month; so if you have a lot of data this is considerable cost savings, putting your EC2 instance in storage by means of an AMI; or putting your disk volume in storage by means of a snapshot. The EC2 instance itself (not considering the cost of the EBS) will vary with which machine you chose. A cheap machine is free (T2.micro). A basic, simple low-power machine will cost three cents per hour. A fairly powerful machine will cost perhaps 40 cents per hour. You can also rent super-powerful machines for several dollars per hour. Since that adds up it is important to know that you can turn these machines off (without losing your data) so that you are not paying for them when you are not using them.</p>

<p><strong>What this page is / isn’t</strong> 
Now this document is in preparation; so it does not cover everything in this topic. For example it does not cover how to save money by using the Spot Market and it does not cover turning EC2 instances on and off and setting Alarms to inform you when they are possibly doing something expensive. We’ll build all of this into these documentation pages; but the main point of this page at the moment is Resources: The short list of items that you tend to build and associate with EC2 instances. This includes AMIs, Snapshots, Key Pairs, and Elastic IPs.</p>

<h2 id="making-an-ami">Making an AMI</h2>
<p>An EC2 instance: We take as a given. (Although we don’t have down “Encrypted” but let’s just flag that with kilroy. Notice I can create an AMI quite easily using the menu. Here is the configuration page:</p>

<p><img src="/documentation/images/aws_ec2instances_pic1.png" alt="pic1" /></p>

<h2 id="resource-overview">Resource Overview</h2>
<p>Returning to the EC2 Resource summary: Let’s take a look at what’s what here term by term: 
<img src="/documentation/images/aws_ec2instances_pic2.png" alt="pic2" /></p>

<p>In this region I’m not (apparently) running any instances.</p>

<h2 id="elastic-ip">Elastic IP</h2>

<p>An Elastic IP is a convenient persistent ip address associated with my account (and with a particular machine unless that machine gets blown away). It is said to be ‘publicly routable’: It is visible/findable on the internet.</p>

<p>AWS will hand us some number of these on demand for very little money. If we do not request this, however, then the default is a temporary public ip address that is only good as long as the instance is up and running. Shut it down and that ip evaporates.</p>

<p>An Elastic IP is persistent on my account and could even be detached and re-attached to something else. This is like having a piece of public plumbing at my disposal… to a resource that I want to share for example.  This ip stuff is distinct from a DNS entry. The latter is a person-friendly string associated with an ip address (free or maybe for a nominal fee).</p>

<h2 id="dedicated-host">Dedicated Host</h2>
<p>A Dedicated Host is a physical computer which permits only me (my AWS account) to be connected. It does not thread in other virtual operating systems or other accounts.  This is an important concept in HIPAA compliance.</p>

<h2 id="snapshot">Snapshot</h2>
<p>A Snapshot is always drawn from, i.e. is an image of some Elastic Block Storage (EBS). An 8GB Snapshot is quite likely the root volume of an AWS Linux EC2 instance. However if you attach more EBS – like say 2TB – to that instance you can make a separate larger Snapshot.</p>

<h2 id="ami">AMI</h2>
<p>An AMI is a Snapshot together with some instructions for standing up an EC2 instance. Hence: When you create an AMI part of that process is a Snapshot or Snapshots of all the EBS volumes associated with that instance.</p>

<h2 id="snapshot-to-ami-conversion-in-linux">Snapshot to AMI Conversion in Linux</h2>
<p>You can “upgrade” a Snapshot to an AMI in Linux… but it is more complicated for Windows. And this is a little bit vague: Do we mean that the snapshot is of the Root volume or an attached volume? The rebuilt AMI – in the case where the original AMI instructions are unavailable – will be built out rather generically. This is one of these digressions that can drive one crazy so let’s leave it there for now.</p>

<h2 id="understanding-a-snapshot-listing">Understanding a Snapshot listing</h2>
<p>When you look at your Snapshot listing:</p>

<p><img src="/documentation/images/aws_ec2instances_pic3.png" alt="pic3" /></p>

<p>…notice “Created by CreateImage(i-dc…) for ami-66…: Let’s break this down. 
	• CreateImage is a facility for building an AMI. Fine. 
	• i-xxx… is an instance ID. 
	• ami-yyy… is an AMI ID.</p>

<h2 id="snapshot-archaeology">Snapshot Archaeology</h2>
<p>Suppose you have an old Snapshot and you are not sure what is on it; and if nothing you might want to delete it. How can you look at it? If the associated AMI is gone you can always create a Volume from the Snapshot, Attach the Volume to some other EC2 instance in the same Availability Zone, mount the Attached Volume and peruse the file system in the usual way.  Maybe your important data is still there!</p>

<p>Create the Volume from the Snapshot</p>

<p><img src="/documentation/images/aws_ec2instances_pic4.png" alt="pic4" /></p>

<p><img src="/documentation/images/aws_ec2instances_pic5.png" alt="pic5" /></p>

<p>I will choose Magnetic because it is a bit cheaper… this is just an example. If I wish to have speed I would stay with SSD.</p>

<p>The Volume is created very quickly.</p>

<p><img src="/documentation/images/aws_ec2instances_pic6.png" alt="pic6" /></p>

<p>Here it is, now listed in the Volume table:</p>

<p><img src="/documentation/images/aws_ec2instances_pic7.png" alt="pic7" /></p>

<p><strong>PRO TIP: When you create a Volume from a Snapshot make sure it is in the same Availabilty Zone (AZ) as the Instance that you intend to attach it to. Failing to do so is a waste of time: You can’t attach a Volume in Oregon to an EC2 in Virginia. In fact you can’t attach a Volume in Virginia 1-a to an EC2 in Virginia 1-b.  Virginia is a Region, 1-a is the Availability Zone.</strong></p>

<p><img src="/documentation/images/aws_ec2instances_pic8.png" alt="pic8" /></p>

<p>That’s where my restored Volume is. Oh look I have a machine there also; though it is Stopped: Let us Start it.</p>

<p><img src="/documentation/images/aws_ec2instances_pic9.png" alt="pic9" /></p>

<p>This finds a host, creates a VM, points to the associated storage… all of this takes a few minutes but you can be impatient and see if you can Attach the restored Snapshot Volume whenever you like.</p>

<p><img src="/documentation/images/aws_ec2instances_pic10.png" alt="pic10" /></p>

<p><img src="/documentation/images/aws_ec2instances_pic11.png" alt="pic11" /></p>

<h2 id="mounting-the-attached-volume">Mounting the Attached Volume</h2>
<p>To check if there is an attached volume, log on (ssh) onto your EC2 instance (Original recipe located <a href="http://maplpro.blogspot.com/2012/05/how-to-mount-ebs-volume-into-ec2-ubuntu.html">here</a>.</p>

<p>```First see if it is attached with:</p>

<blockquote>
  <blockquote>
    <p>sudo fdisk -l
Disk /dev/xvdc: 10.7 GB, 10737418240 bytes</p>
  </blockquote>
</blockquote>

<p>Then format it (if you haven’t already done it)
» sudo mkfs -t ext4 /dev/xvdc</p>

<p>Create dir where it will be mounted:
»mkdir /data</p>

<p>That’s it you can mount it:
»sudo mount /dev/xvdc /data</p>

<p>Check if it has been mounted correctly with:
»mount -l
/dev/xvdc on /data type ext4 (rw)</p>

<p>Make it to mount automatically on system start
»sudo vim  /etc/fstab</p>

<p>and add this:
/dev/xvdc       /data   auto    defaults,nobootwait     0       0```</p>

<p>That’s it. Make sure your read and write permissions are set accordingly using chmod. 
## What is the Snapshot ID?
Here is a screen capture of some volumes:</p>

<p><img src="/documentation/images/aws_ec2instances_pic12.png" alt="pic12" /></p>

<p>Each is attached to an EC2 instance. Notice these have a snapshot ID. This means that these volumes were created from a snapshot, for example from an AMI = Snapshot + instructions. It does not mean that this snapshot still exists; or that if it did exist it would reflect what is actually in the restored volume. That volume probably has changed. So to explore these volumes:  Again we would ssh into the EC2 instance associated and go look at the file system.</p>

<p>In the case above, by the way, as noted earlier: These are all tell-tale Linux OS root volumes because the default on AWS Linux EC2 instances is 8GB.</p>

<p><strong><em>Pro Tip: Returning to the snapshot table comment field (‘Created by…’ in our example above): This can have anything in there (User defined) when the snapshot is of an EBS without this AMI association business.</em></strong></p>

<p>This concludes the overview of Snapshots and AMIs and the archaeological process of figuring out what is preserved on an artifact Snapshot.</p>

<h2 id="key-pairs">Key Pairs</h2>
<p>In the Resource summary table there is an entry for Key Pairs. Let’s cover what these are next. A Key Pair is both a public and a private key; and we will be primarily discussing the use of the private key file to authenticate into an AWS EC2 instance using the secure shell (ssh) protocol.</p>

<p>Start up an EC2 instance. You need an initial way of getting in via ssh. Rather than use a password let’s use Key Pair authentication. I get the private Key file; and it contains JUST a private key: A long string of characters. Let’s not publish this on Github.</p>

<p>When I authenticate using PuTTY I set it to use this private key. PuTTY uses the ‘.ppk’ version of the key but AWS only gives out a ‘.pem’ version of that file. No problem: There is a separate application called PuTTYGen that does the conversion. So procedurally: 
	1. Generate the EC2 instance
	2. From the AWS Console: Get the key file associated.
	3. Install both PuTTY and PuTTYGen (both will install in a PuTTY package)
	4. Run PuTTYGen and convert the key file from .pem to .ppk format
	5. Run PuTTY and use the .ppk file to log in to the instance.</p>

<p>To ssh to this EC2 instance I will need to know what username to enter.  This can vary from one EC2 instance type (OS) to another. For example on an AWS-styled Linux machine the user name is ec2-user. On an AWS EC2 Ubuntu instance the username is ubuntu.</p>

<p>Now I have logged in to the machine using ssh. I can sudo anything I want. Success.</p>

<p>How do I log in in the future? How do others log in? Three options: 
	1. I can use the key that I have and/or give that key to someone else. 
	2. I can generate a new key on that machine and share that key. This has nothing to do with AWS. I could do it with a script for example, using Linux commands. 
	3. I can enable logging in by username and password.</p>

<p>Notice that ssh is a secure (encrypted) tunnel through which these keys are passing.</p>

<p>https://en.wikipedia.org/wiki/Secure_Shell</p>

<p>This security level is maintained as a separate effort by ssh / PuTTY. (PuTTY is the application and ssh is the cryptographic network protocol.</p>

<h2 id="ssh-putty-scp-and-winscp">Ssh, PuTTY, scp and WinSCP</h2>
<p>Now that we have identified PuTTY as the ssh-using application let’s go a bit further. Ssh is also a Linux command for logging into another machine; so in a sense PuTTY is the Windows equivalent of the Linux ssh. Similarly there is a secure copy program in Linux called scp. The Windows analog is WinSCP.</p>

<h2 id="more-on-keys">More on Keys</h2>
<p>Keys are actually generated in pairs: The public and private key pair are associated; and the public key can be openly shared. For more on this see https://en.wikipedia.org/wiki/Public-key_cryptography</p>

<p>On AWS I can only generate one key pair per machine. The private key recognition machinery is injected into the instance when it launches the first time; and I can start multiple instances using that same key. If I create an AMI and use that to generate many EC2 instances: Again just one private key provides access to all of them. One key can map to many EC2 instances in the context of AWS.</p>

<h2 id="keys-versus-s3-access-sharing">Keys Versus S3 Access Sharing</h2>
<p>Let’s take a moment to contrast Key-based access to an EC2 instance with the process of sharing files using S3 buckets. The latter is done using IAM permissions, specifically using a Bucket Policy.</p>

<p>Sharing between AWS accounts is straightforward. If my friend has an AWS account then I just set that up in the S3 bucket policy by referring to his account number. So he has to send me that.</p>

<p>Sharing with non-AWS-account holders is also easy and there are several options. If my collaborator has no AWS account I have three broad categories of approach: IAM User, Web Server and Signed URL.
	• IAM User method: I get an Access Key and a Secret Key. I do not think this is the same thing as a Key Pair but I could be proven wrong. I receive these two keys for example when I create a User. They reside in a single credential file. I click “Download Credentials” and there it is in ASCII. The file is in CSV format and includes a user name, an access key and a secret key (all strings). 
		○ There are three ways of getting to the S3 bucket now for that person. 
			§ Third party tool: Cloudberry, Cyberduck, etcetera
			§ AWS command line interface (CLI)
			§ An API call
		○ Notice this does NOT involve the Web Console. 
			§ They can only use the AWS Web Console if I generate a password for them using IAM. 
	• Put a web server / web app in front of the S3 bucket. This pushes the problem down a level, so to speak.
	• Generate a signed URL
		○ Gives access to one object during the time-to-live associated with that URL. 
		○ This can be done on the CLI or in one of those applications (Cloudberry etc)
			§ Look for the button that says ‘Generate signed URL’</p>

<p>So now we have covered Key Pairs and differentiated Key Pair use from S3 access.</p>

<h2 id="mounting-an-ebs-to-your-instance">Mounting an EBS to your Instance</h2>



    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tag_AWS.html" class="btn btn-default navbar-btn cursorNorm" role="button">AWS</a>
        
        
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 cloudmaven. All rights reserved. <br />
<span>Page last updated:</span> October 6, 2016<br/> Site last generated: Dec 6, 2016 <br />
<p><img src="images/Picture1.gif" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>