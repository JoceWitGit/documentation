<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Rosetta peptide design studies on the AWS cloud">
<meta name="keywords" content="Rosettascaleresearch_computingAWSorganic_chemistrydata_scienceresearch_creditscase_studies,  research_computing, data_science">
<title>Rosetta computing at scale | Research Computing Resources</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-purple.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://idratherbewriting.comfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });
            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });
            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });
        });
    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Research Computing Resources</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="calendar.html">Calendar</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Jekyll Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/tomjohnson1492/documentation-theme-jekyll" target="_blank">Github Repo</a></li>
                        
                        
                        
                        <li><a href="https://talk.jekyllrb.com" target="_blank">Jekyll Talk</a></li>
                        
                        
                        
                        <li><a href="http://jekyllrb.com/docs/home/" target="_blank">Jekyll documentation</a></li>
                        
                        
                        
                        <li><a href="http://stackoverflow.com/questions/tagged/jekyll" target="_blank">Jekyll on Stack Overflow</a></li>
                        
                        
                        
                        <li><a href="http://idratherbewriting.com/category-jekyll/" target="_blank">Jekyll on my blog</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li><a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:amandach@uw.edu?subject=cloud maven f eedback&body=I have some feedback about the Rosetta computing at scale page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Rosetta computing at scale">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">
          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Documentation </li>
    
    
    
        
    
    <li>
        <a href="#">Cloud Core</a>
        <ul>
            
            
            
            <li><a href="cc_what_is_the_cloud.html">What is the cloud?</a></li>
            
            
            
            
            
            
            <li><a href="cc_data_security.html">Data security</a></li>
            
            
            
            
            
            
            <li><a href="cc_glossary.html">Glossary</a></li>
            
            
            
            
            
            
            <li><a href="cc_cost_management.html">Cost management</a></li>
            
            
            
            
            
            
            <li><a href="cc_compute_power.html">Compute power</a></li>
            
            
            
            
            
            
            <li><a href="cc_docker_containers.html">Docker containers</a></li>
            
            
            
            
            
            
            <li><a href="cc_internet_of_things.html">Internet of things</a></li>
            
            
            
            
            
            
            <li><a href="cc_technical.html">Cloud technical</a></li>
            
            
            
            
            
            
            <li><a href="cc_network.html">Network</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Proposal Prep</a>
        <ul>
            
            
            
            <li><a href="p_consulting.html">Consulting</a></li>
            
            
            
            
            
            
            <li><a href="p_costing.html">Costing the cloud</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Research computing</a>
        <ul>
            
            
            
            <li><a href="rc_student_research.html">Student Research</a></li>
            
            
            
            
            
            
            <li><a href="rc_cloud101_immersion.html">Cloud 101 Immersion</a></li>
            
            
            
            
            
            
            <li><a href="rc_Foster101.html">Foster 101</a></li>
            
            
            
            
            
            
            <li><a href="http:escience.washington.edu">WRF Data Science Studio</a></li>
            
            
            
            
            
            
            <li><a href="rc_yun_zhou_guan.html">Yun Zhou Guan (Cloud Library)</a></li>
            
            
            
            
            
            
            <li><a href="rc_data_science.html">Data science</a></li>
            
            
            
            
            
            
            <li><a href="rc_research_on_the_web.html">Research on the web</a></li>
            
            
            
            
            
            
            <li><a href="rc_github.html">GitHub</a></li>
            
            
            
            
            
            
            <li><a href="rc_jupyterhub.html">JupyterHub</a></li>
            
            
            
            
            
            
            <li><a href="rc_visualization_python.html">Visualization Python</a></li>
            
            
            
            
            
            
            <li><a href="rc_visualization_virtual_globes.html">Visualization virtual globes</a></li>
            
            
            
            
            
            
            <li><a href="rc_lightweight_data_systems.html">Lightweight Data Systems</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Curriculum</a>
        <ul>
            
            
            
            <li><a href="curr_notebooks.html">Jupyter for coursework</a></li>
            
            
            
            
            
            
            <li><a href="curr_yun_zhou_guan.html">Cloud Library</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">AWS</a>
        <ul>
            
            
            
            <li><a href="aws_overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="aws_walkthrough.html">Walkthrough</a></li>
            
            
            
            
            
            
            <li><a href="aws_console.html">Console</a></li>
            
            
            
            
            
            
            <li><a href="aws_account_management.html">Account management</a></li>
            
            
            
            
            
            
            <li><a href="aws_cost_tracking.html">Cost Tracking</a></li>
            
            
            
            
            
            
            <li><a href="aws_cost_notification_system.html">Cost Notification System</a></li>
            
            
            
            
            
            
            <li><a href="aws_ec2.html">EC2</a></li>
            
            
            
            
            
            
            <li><a href="aws_spot_market.html">Spot market</a></li>
            
            
            
            
            
            
            <li><a href="aws_cluster.html">Cluster</a></li>
            
            
            
            
            
            
            <li><a href="aws_storage.html">Storage</a></li>
            
            
            
            
            
            
            <li><a href="aws_lambda.html">Lambda</a></li>
            
            
            
            
            
            
            <li><a href="aws_jupyter.html">Jupyter</a></li>
            
            
            
            
            
            
            <li><a href="aws_hipaa.html">HIPAA</a></li>
            
            
            
            
            
            
            <li><a href="aws_iot.html">IoT</a></li>
            
            
            
            
            
            
            <li><a href="aws_spark.html">Spark</a></li>
            
            
            
            
            
            
            <li><a href="aws_database.html">Database</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Azure</a>
        <ul>
            
            
            
            <li><a href="az_overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="az_walkthrough.html">Walkthrough</a></li>
            
            
            
            
            
            
            <li><a href="az_training.html">Training</a></li>
            
            
            
            
            
            
            <li><a href="az_portal.html">Portal</a></li>
            
            
            
            
            
            
            <li><a href="az_account_management.html">Account management</a></li>
            
            
            
            
            
            
            <li><a href="az_visual_studio.html">Visual Studio</a></li>
            
            
            
            
            
            
            <li><a href="az_web_framework.html">Web Framework</a></li>
            
            
            
            
            
            
            <li><a href="az_machine_learning.html">Machine Learning</a></li>
            
            
            
            
            
            
            <li><a href="az_spark.html">Spark</a></li>
            
            
            
            
            
            
            <li><a href="az_hipaa.html">HIPAA</a></li>
            
            
            
            
            
            
            <li><a href="az_jupyter.html">Jupyter</a></li>
            
            
            
            
            
            
            <li><a href="az_database.html">Database</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Google</a>
        <ul>
            
            
            
            <li><a href="g_overview.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="g_walkthrough.html">Walkthrough</a></li>
            
            
            
            
            
            
            <li><a href="g_app_engine.html">App Engine</a></li>
            
            
            
            
            
            
            <li><a href="g_big_query.html">BigQuery</a></li>
            
            
            
            
            
            
            <li><a href="g_compute_engine.html">Compute Engine</a></li>
            
            
            
            
            
            
            <li><a href="g_preemptible_instances.html">Preemptible Instances</a></li>
            
            
            
            
            
            
            <li><a href="g_earth_engine.html">Earth Engine</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Cloud Case Studies</a>
        <ul>
            
            
            
            <li><a href="ccs_precis.html">Precis</a></li>
            
            
            
            
            
            
            <li><a href="ccs_DIF.html">Dynamic Information Framework (DIF)</a></li>
            
            
            
            
            
            
            <li><a href="ccs_high_mountain_asia.html">High Mountain Asia (HiMAT/NASA)</a></li>
            
            
            
            
            
            
            <li><a href="ccs_OOI.html">Ocean Observing Initiative</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">AWS Case Studies</a>
        <ul>
            
            
            
            <li><a href="acs_light_sheet_microscope.html">Light Sheet Microscope</a></li>
            
            
            
            
            
            
            <li><a href="acs_epigenome_imputation.html">Epigenome Imputation</a></li>
            
            
            
            
            
            
            <li><a href="acs_nicadif.html">NicaDIF</a></li>
            
            
            
            
            
            
            <li><a href="acs_geoserver.html">Geoserver and LIDAR</a></li>
            
            
            
            
            
            
            <li class="active"><a href="acs_rosetta.html">Rosetta</a></li>
            
            
            
            
            
            
            <li><a href="acs_neurohackweek.html">Neurohackweek</a></li>
            
            
            
            
            
            
            <li><a href="acs_cfd.html">CFD</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Azure Case Studies</a>
        <ul>
            
            
            
            <li><a href="azcs_araldif.html">AralDIF</a></li>
            
            
            
            
            
            
            <li><a href="azcs_organic_chemistry.html">organic chemistry</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Google Case Studies</a>
        <ul>
            
            
            
            <li><a href="https://cloud.google.com/customers/colorado-center-for-personalized-medicine/" target="_blank">Health Data Compass - Colorado Center for Personalized Medicine</a></li>
            
            
            
            
            
            
            <li><a href="https://cloud.google.com/customers/stanford-universitys-center-of-genomics-and-personalized-medicine/" target="_blank">Center of Genomics and Personalized Medicine - Stanford University</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Rosetta computing at scale</h1>
</div>



<div class="post-content">

   
    <div class="summary">Rosetta peptide design studies on the AWS cloud</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

    

    

    

  <h2 id="introduction">Introduction</h2>

<p>This page presents a success story: Massive-scale cluster computing on the Amazon Web Services public cloud. 
The computations use the <strong>Rosetta</strong> molecular design software to explore small protein (peptide) structures
using a fixed number of amino acids.  These protein structures (scaffolding) could be used to target 
binding sites in therapeutic medicine.</p>

<p>This case study shows that a <em>moderately large</em> compute task runs quickly and cost-effectively 
on the public cloud. The computing machines are maintained by AWS so no time-consuming process of 
purchasing, configuring, operating, maintaining and updating compute clusters was involved.</p>

<p>This success on the AWS public cloud uses key technologies and methods that we describe
in further detail below. The methods described are applicable to any research computing 
task that can be broken into many independent parallel computational threads. 
Components include:</p>

<ul>
  <li>The <a href="https://www.bakerlab.org">Baker Lab Rosetta software suite</a></li>
  <li>Powerful <a href="https://aws.amazon.com/ec2">EC2 compute instances</a></li>
  <li>The <a href="aws_spot_market.html">AWS Spot market</a>i</li>
  <li><a href="https://aws.amazon.com/ec2/pricing/on-demand/">Optimization analysis</a> of cloud computing instance types</li>
  <li>The AWS <a href="https://aws.amazon.com/batch/"><strong>Batch</strong></a> service</li>
  <li>The <a href="https://aws.amazon.com/grants/">AWS Research Credit Grant program</a></li>
</ul>

<h2 id="cciie-remarks">CC*IIE Remarks</h2>

<p>This component of the NSF-sponsored CC*IIE project looks at doing large-scale compute tasks on the public cloud. 
The primary objective is to match cost to compute by spinning up a certain number of compute instances, 
getting them to run pieces of the complete task, and then shut down quickly to minimize cost. 
We first approach this on AWS using a standard mechanism called Cloud Formation Network clustering (‘cfncluster’). 
We also want to use the AWS Spot market since this cuts instance cost by up to 80% per virtual machine.
The scale of the task ran into some obstacles because the Spot market instance pool is a small subset of 
the complete AWS instance pool. We overcame this limitation using a new service from AWS called <strong>Batch</strong>.</p>

<h3 id="objective-and-approach">Objective and Approach</h3>

<ul>
  <li>Science objective: Explore possible structures of proteins built from a small number of amino acids</li>
  <li>Technical objective: Paralellize analysis software to show large-scale compute power on the public cloud</li>
</ul>

<p>To generalize this process the following steps would be typical:</p>

<ul>
  <li>Identify the research problem that requires large-scale computing</li>
  <li>Configure the AWS User account</li>
  <li>Configure the execution software and the data structure</li>
  <li>Configure <strong>cfncluster</strong>, <strong>EnginFrame</strong> or <strong>Batch</strong> to run the job at scale on the AWS Spot market</li>
  <li>Recover the results and close the compute infrastructure</li>
</ul>

<h3 id="solution">Solution</h3>

<ul>
  <li>The Spot market proved to have limited capacity; that is, a limited number of available instances
    <ul>
      <li>This is due to the two-tier resource allocation: Regions on a high level and Availability Zones on the sub-level</li>
      <li>cfncluster only works within one Availability Zone (AZ)</li>
      <li>The number of Spot instances within a single AZ was insufficient</li>
      <li>Desired capacity: On the order of 200 <a href="https://aws.amazon.com/ec2/instance-types/">c4.8xlarge</a> compute instances</li>
    </ul>
  </li>
  <li>The project migrated to the <a href="http://docs.aws.amazon.com/batch/latest/userguide/what-is-batch.html"><strong>AWS Batch</strong></a> 
service to allocate Spot market instances across Availability Zones within a single Region</li>
</ul>

<h3 id="results">Results</h3>
<ul>
  <li>This <strong>Batch</strong> solution resulted in 160 c4.8xlarge instances running for 53 hours on a single compute task
producing 5 million positive structural results; at a fraction of the On Demand rate</li>
  <li>The Rosetta compute produced 5 million peptide structures using 313,000 virtual CPU hours at a cost of $3477.</li>
  <li>The results are documented below and in considerable detail <a href="https://github.com/cloudmaven/Rosetta/wiki">at this wiki</a>.</li>
  <li>Key numbers
    <ul>
      <li>53: wall clock hours required to complete calculations
        <ul>
          <li>391: Wall clock hours needed to complete the same task on the Researcher’s available on-premise HPC resources</li>
          <li>$800,000: Cost for on-premise hardware capable of producing this result in 53 hours</li>
          <li>230: The number of such calculations that could be run for this amount</li>
        </ul>
      </li>
      <li>164: Number of C4.8xlarge EC2 instances allocated on average from the AWS Spot market (max 200)
        <ul>
          <li>5904: Equivalent number of vCPUs (virtual processors)</li>
          <li>$0.40: Spot market cost per instance-hour
            <ul>
              <li>showed no significant cost variation over the task duration, nor impact on market price</li>
              <li>$0.012 per vCPU-hour. Careful optimization saved more than $600 over other instance choices</li>
            </ul>
          </li>
          <li>$3477: Task compute cost (covered by an AWS research credit grant)</li>
        </ul>
      </li>
      <li>5.2 million: Number of positive results (peptide scaffold structures)</li>
    </ul>
  </li>
</ul>

<h2 id="related-links">Related Links</h2>

<ul>
  <li><a href="http://www.nature.com/nature/journal/v538/n7625/full/nature19791.html">Peptide design paper: Gaurav Bhardwaj and others</a></li>
  <li><a href="https://aws.amazon.com/batch/">AWS Batch service</a></li>
  <li><a href="https://www.bakerlab.org">Baker Lab Rosetta software suite</a></li>
  <li><a href="https://els.comotion.uw.edu/express_license_technologies/rosetta">Rosetta (from COMOTION)</a></li>
  <li><a href="https://github.com/cloudmaven/Rosetta/wiki">Procedural Documentation</a></li>
  <li><a href="https://www.rosettacommons.org/docs/latest/Home">Rosetta Commons website</a></li>
  <li><a href="https://www.rosettacommons.org/docs/latest/scripting_documentation/RosettaScripts/RosettaScripts">Rosetta Commons ‘Scripts’</a></li>
  <li><a href="https://www.rosettacommons.org/docs/latest/build_documentation/Build-Documentation">Compiling Rosetta</a></li>
</ul>

<h2 id="remark-on-aws-cfncluster-in-relation-to-aws-batch">Remark on <strong>AWS cfncluster</strong> in relation to <strong>AWS Batch</strong></h2>

<ul>
  <li>The AWS Spot instance pool is smaller in capacity than the AWS On Demand pool and typically
features much better cost-per-hour rates.  We found that this smaller pool can constrain compute 
scale; so a major part of this effort was determining how to overcome this constraints. 
We did so via choice of region combined with adoption of the Batch service to allocate tasks 
across AWS availability zones (AZs) within that region.<br />
For more detail please refer to our <a href="https://github.com/cloudmaven/Rosetta/wiki">Rosetta wiki</a>.</li>
</ul>

<h2 id="science-background">Science background</h2>

<p>AWS research credits provided for this work have contributed significantly to the challenge 
of large scale sampling of peptide scaffolds – stable structures that would be the basis for 
developing new therapeutics. This section is a brief sketch of the scientific basis.</p>

<p>On DNA: Human DNA consists of 3 billion base molecules arranged in pairs as rungs of a helical ladder. 
The base pair sequence records how to construct proteins in the following manner:  Each base (nucleotide) 
can have one of four values abbreviated A, C, G, or T.  Three bases in a row can be thought of as three 
digits in base-4; for example AAG or TCA. That is, this triple is a number from 0 to 63.  These 
triples map to one of 20 left-handed amino acids (with some values degenerate and others 
‘not assigned’.)</p>

<p>On amino acides: Common to all life on earth these 20 naturally occurring molecules are the building 
blocks of proteins. Smaller chains of such amino acids are called peptides. Once a particular sequence
of amino acids is bonded together end-to-end and released its rotational degrees of freedom may 
permit it to fold up into an energetically favorable structure. This structure may in turn serve 
some chemical/biological function. The Rosetta software can analyze the manner of folding thereby 
connecting a hypothetical amino acid sequence to a protein structure, also called a <em>scaffold</em>.</p>

<p>The practical challenge is the matching of such structures to naturally occuring geometries of 
interest within the organism’s molecular landscape, often described using a ‘lock and key’ 
analogy: A given therapeutic molecule could be designed to fit a particular binding site 
for example on a cell wall, thereby either enhancing or restricting some metabolic process
at that location.  One ultimate aim then would be to comprehensively sample all possible shapes 
such that a large number of highly stable ‘keys’ are ready to be molded or slightly re-configured 
into any desired shape.</p>

<p>The compute task described here samples the space of possible peptide structures. These structures 
must prove to be feasible and stable before they can be subjected to further analysis. Ultimately 
a design of interest (from the computation) may be synthesized as an actual physical protein in 
the laboratory (a fascinating process) which would then be subjected to chemical analysis to 
validate that its structure is indeed as predicted by the software.</p>

<h2 id="cost-tradeoffs">Cost tradeoffs</h2>

<p>Purchasing and maintaining dedicated hardware is the traditional approach to high performance computing
(HPC) which includes the compute task described in this case study.  The public cloud represents an 
alternative approach where low/falling cloud costs, increasing convenience, read-to-use services and outsourced 
system administration are factors to consider. At what point is cloud computing cost-equivalent to 
on-premise computing?  Here are two views of the break-even concept.</p>

<h3 id="hard-break-even">Hard Break-even</h3>

<p>Take the lifespan of a purchased computer to be three years.  In this case study the compute task ran 
for 53 hours on the AWS cloud and cost $3500. When an equivalent single computer costing $3500 requires 
3 years to complete the same task we could say that cloud cost has reached parity with on-premise 
cost. It is worth noting however that the on-premise solution takes 500 times longer to finish the 
computation.  We estimate the time to complete the compute task described here would be 246 days which
is 849 days sooner than the hard break-even of three years.  This means that a head-to-head comparison
with 100% CPU utilization for three years favors the on premise computer today. It is when the
purchased computer is not being used at 100% capacity that the cloud cost begins to be comparable.</p>

<h3 id="soft-break-even">Soft Break-even</h3>

<p>Soft break-even brings wall-clock time and other factors into consideration. At what point does waiting 
for compute tasks hinder the researcher’s progress? In this case study the Researcher is fortunate to have 
access to an on-premise cluster that would complete the same task in two weeks. On that cluster the completion 
time scales with the size of the computation: A four-times-larger compute task would require two months
whereas on the public cloud time to complete is unchanged: The larger task will still only require 
wall clock time on the order of 48 hours.</p>

<p>This matter of personal or wall-clock time is <em>prima facia</em> a strong argument for working when 
possible on a cloud platform. We note that cloud vendor <a href="p_research_credits.html"><em>research credits</em></a> 
enable a Researcher to explore this benefit with relatively low financial entry risk.</p>

<p>A final remark on human versus computer time: If human time becomes a factor in computing then a
suitable question might be: How many computers do I need to purchase to reach an acceptable human 
or ‘wall clock’ time for my computations to run? Again if this computation can be followed by 
another and another in succession: That is 100% CPU use and it justifies purchasing dedicated 
hardware. However the other side of the coin is that a research team may not have this level of
processing requirement or they may not have this level of funding.</p>

<h2 id="some-contextual-terms-and-concepts-for-large-computing-tasks-on-aws">Some contextual terms and concepts for large computing tasks on AWS</h2>

<ul>
  <li>
    <p>Batch service: An AWS service suited to larger-scale resource allocation on the AWS Spot market</p>
  </li>
  <li>
    <p>cfncluster service: Abbreviated term for <em>Cloud Formation Network cluster</em>, an association of technologies
that facilitate engaging many EC2 instances for parallel processing tasks in coordination with a Scheduler.</p>
  </li>
  <li>
    <p>Sun Grid Engine (SGE): A Scheduler commonly used on AWS that coordinates with <em>cfncluster</em></p>
  </li>
  <li>
    <p>Configuration Instance: A small EC2 instance used to configure and run <em>cfncluster</em></p>
  </li>
  <li>
    <p>Master: An AWS EC2 instance (with EBS volume attached) running as the Master node of a <em>cfncluster</em> 
under the SGE Scheduler</p>
  </li>
  <li>
    <p>Worker: An AWS EC2 instance (for example from the Spot market pool) executing a large compute task</p>
  </li>
  <li>
    <p>Optimization benchmarking: Studying the consequences of choice of EC2 instance, task loading, other configuration settings.</p>
  </li>
  <li>
    <p>Time optimization: Analysis of instances and settings to complete a given Job in minimal time.</p>
  </li>
  <li>
    <p>Cost optimization: Analysis of instances and settings to complete a given Job at lowest cost in USD.</p>
  </li>
  <li>
    <p>T2 Micro: An EC2 instance that costs very little and can configure the heavy processing (cost saving strategy).</p>
  </li>
  <li>
    <p>Key Pair: A digital signature contained as a file that grants ssh access to an EC2 instance without user/password login</p>
    <ul>
      <li>Crucial concept: Never include Key Pair files in GitHub repositories; this can cost you tens of thousands of dollars</li>
    </ul>
  </li>
</ul>

<p>As noted: For more on large compute tasks on AWS please refer to the <a href="https://github.com/cloudmaven/Rosetta/wiki">Rosetta wiki</a></p>



    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tag_Rosetta.html" class="btn btn-default navbar-btn cursorNorm" role="button">Rosetta</a>
        
        
        
        <a href="tag_scale.html" class="btn btn-default navbar-btn cursorNorm" role="button">scale</a>
        
        
        
        <a href="tag_research_computing.html" class="btn btn-default navbar-btn cursorNorm" role="button">research_computing</a>
        
        
        
        <a href="tag_AWS.html" class="btn btn-default navbar-btn cursorNorm" role="button">AWS</a>
        
        
        
        <a href="tag_organic_chemistry.html" class="btn btn-default navbar-btn cursorNorm" role="button">organic_chemistry</a>
        
        
        
        <a href="tag_data_science.html" class="btn btn-default navbar-btn cursorNorm" role="button">data_science</a>
        
        
        
        <a href="tag_research_credits.html" class="btn btn-default navbar-btn cursorNorm" role="button">research_credits</a>
        
        
        
        <a href="tag_case_studies.html" class="btn btn-default navbar-btn cursorNorm" role="button">case_studies</a>
        
        
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
<p>Support for this program is provided in part by the NSF Campus Cyberinfrastructure (CC*IIE) program, grant award number ACI-1440281.</p>
<br>
               &copy;2017 cloudmaven. All rights reserved. <br />
<span>Page last updated:</span> October 6, 2016<br/> Site last generated: Sep 9, 2017 <br />
<p><img src="images/cloudmaven_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>
</body>

</html>
